 MULTI-DOCUMENT WORKFLOW - INTEGRATION TEST          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Setup: Creating test project...
âœ“ Created project 21

Running multi-document analyzer...

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   MULTI-DOCUMENT PROJECT IMPORT STARTING           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ Project ID: 21
ğŸ“„ Documents: 3
ğŸ“… Start Date: 2025-01-06

Step 1/7: Combining document text...
âœ“ Combined 1403 characters

Step 2/7: Detecting workstreams...
ğŸ” Analyzing document for workstreams...
ğŸ“„ Raw AI response length: 3532
ğŸ”¢ Tokens used: 1651
âœ… Identified 5 workstreams
âœ“ Found 5 workstreams
  1. Backup Validation and Verification (unknown complexity)
  2. NTDS.DIT Extraction (unknown complexity)
  3. Infrastructure Assessment and Domain Analysis (unknown complexity)
  4. AWS Deployment and Configuration (unknown complexity)
  5. Project Milestones and Approval Gates (unknown complexity)

Step 3/7: Creating issues from workstreams...
  âœ“ Created issue #124: Backup Validation and Verification
  âœ“ Created issue #125: NTDS.DIT Extraction
  âœ“ Created issue #126: Infrastructure Assessment and Domain Analysis
  âœ“ Created issue #127: AWS Deployment and Configuration
  âœ“ Created issue #128: Project Milestones and Approval Gates
âœ“ Created 5 issues

Step 4/7: Extracting timeline...
âœ“ Extracted 3 phases, 3 milestones

Step 5/7: Creating dependencies...
ğŸ”— Creating dependencies for 5 workstreams in project 21
  â†’ Found 5 issues in project
  âœ“ Mapped "Backup Validation and Verification" â†’ Issue #124 "Backup Validation and Verification"
  âœ“ Mapped "NTDS.DIT Extraction" â†’ Issue #125 "NTDS.DIT Extraction"
  âœ“ Mapped "Infrastructure Assessment and Domain Analysis" â†’ Issue #126 "Infrastructure Assessment and Domain Analysis"
  âœ“ Mapped "AWS Deployment and Configuration" â†’ Issue #127 "AWS Deployment and Configuration"
  âœ“ Mapped "Project Milestones and Approval Gates" â†’ Issue #128 "Project Milestones and Approval Gates"
  â†’ 0 dependencies to create
âœ… Created 0 dependencies
âš  4 warnings
âœ“ Created 0 dependencies

Step 6/7: Parsing resource assignments...
ğŸ” RESOURCE PARSER - Starting extraction

Strategy 1: Parsing tables...
ğŸ“Š Found resource table with headers: task component, resource, role, effort
  âœ“ Parsed: Sultan (Infrastructure Lead) - 5.2 hours on Backup Validation
  âœ“ Parsed: Srihari S (Systems Engineer) - 2.3 hours on NTDS Extraction
  âœ“ Parsed: Moshik V (Cloud Architect) - 40 hours on AWS Deployment
  âœ“ Parsed: Sultan (Infrastructure Lead) - 12 hours on Replication Setup

Strategy 2: Parsing lists...

Strategy 3: Parsing paragraphs...

ğŸ“Š Total resources extracted: 4

Deduplicating resources...
âœ“ Unique resources: 4

Fetching project users...
âŒ Error fetching project users: error: column u.full_name does not exist
    at /home/runner/workspace/node_modules/@neondatabase/serverless/index.js:1086:33
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async getProjectUsers (/home/runner/workspace/services/resource-parser.js:274:20)
    at async Object.parseResources (/home/runner/workspace/services/resource-parser.js:513:13)
    at async MultiDocumentAnalyzer.analyzeMultipleDocuments (/home/runner/workspace/services/multi-document-analyzer.js:210:36)
    at async runWorkflowTest (/home/runner/workspace/tests/test-multi-document-workflow.js:100:20) {
  length: 109,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '35',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
âš ï¸  No users found in project - skipping user matching

âœ… Resource parsing complete!
   Resources: 4
   Matched: 0
   Need review: 0
âœ“ Assigned 0 resources

Step 7/7: Generating checklists...
  Processing 5 of 5 workstreams
ğŸ¤– Generating standalone checklists from document (1403 chars)
[AI] Starting document analysis (provider: OpenAI GPT-4o)
[AI] Document analysis complete, parsing response...
=== AI RESPONSE DEBUG ===
Result keys: [ 'checklists' ]
Checklists count: 3
Checklist: "Phase 0: Prerequisites"
  Section: "Backup Validation" - 3 items
  Section: "Gate 1 Approval" - 4 items
  âœ… Valid: 7 total items
Checklist: "Phase 1: Discovery"
  Section: "Infrastructure Assessment" - 3 items
  âœ… Valid: 3 total items
Checklist: "Phase 2: Execution"
  Section: "AWS Deployment and Setup" - 3 items
  âœ… Valid: 3 total items
âœ… Generated 3 valid checklists with 13 total items
ğŸ¤– Generating standalone checklists from document (1403 chars)
[AI] Starting document analysis (provider: OpenAI GPT-4o)
[AI] Document analysis complete, parsing response...
=== AI RESPONSE DEBUG ===
Result keys: [ 'checklists' ]
Checklists count: 3
Checklist: "Phase 0: Prerequisites"
  Section: "Backup and Verification" - 3 items
  Section: "NTDS.DIT Extraction" - 1 items
  Section: "Gate 1 Approval" - 3 items
  âœ… Valid: 7 total items
Checklist: "Phase 1: Discovery"
  Section: "Infrastructure Assessment" - 1 items
  Section: "Domain Analysis" - 1 items
  Section: "Migration Planning" - 1 items
  âœ… Valid: 3 total items
Checklist: "Phase 2: Execution"
  Section: "AWS Deployment" - 1 items
  Section: "Replication Setup" - 1 items
  Section: "Functional Level Upgrade" - 1 items
  âœ… Valid: 3 total items
âœ… Generated 3 valid checklists with 13 total items
ğŸ¤– Generating standalone checklists from document (1403 chars)
[AI] Starting document analysis (provider: OpenAI GPT-4o)
[AI] Document analysis complete, parsing response...
=== AI RESPONSE DEBUG ===
Result keys: [ 'checklists' ]
Checklists count: 4
Checklist: "Phase 0: Prerequisites"
  Section: "Backup Tasks" - 3 items
  Section: "NTDS.DIT Extraction" - 1 items
  Section: "Gate 1 Approval" - 3 items
  âœ… Valid: 7 total items
Checklist: "Phase 1: Discovery"
  Section: "Infrastructure Assessment" - 1 items
  Section: "Domain Analysis" - 1 items
  Section: "Migration Planning" - 1 items
  âœ… Valid: 3 total items
Checklist: "Phase 2: Execution"
  Section: "AWS DC Deployment" - 1 items
  Section: "Replication Setup" - 1 items
  Section: "Functional Level Upgrade" - 1 items
  âœ… Valid: 3 total items
Checklist: "Milestones and Dependencies"
  Section: "Milestones" - 3 items
  Section: "Dependencies" - 1 items
  âœ… Valid: 4 total items
âœ… Generated 4 valid checklists with 17 total items
ğŸ¤– Generating standalone checklists from document (1403 chars)
[AI] Starting document analysis (provider: OpenAI GPT-4o)
[AI] Document analysis complete, parsing response...
=== AI RESPONSE DEBUG ===
Result keys: [ 'checklists' ]
Checklists count: 4
Checklist: "Phase 0: Prerequisites"
  Section: "Backup Validation" - 3 items
  Section: "Preparation" - 2 items
  Section: "Gate 1 Approval" - 3 items
  âœ… Valid: 8 total items
Checklist: "Phase 1: Discovery"
  Section: "Infrastructure Assessment" - 2 items
  Section: "Migration Planning" - 2 items
  âœ… Valid: 4 total items
Checklist: "Phase 2: Execution"
  Section: "AWS Deployment" - 1 items
  Section: "Replication Setup" - 1 items
  Section: "Functional Level Upgrade" - 1 items
  âœ… Valid: 3 total items
Checklist: "Resource Allocation"
  Section: "Task Assignments" - 4 items
  âœ… Valid: 4 total items
âœ… Generated 4 valid checklists with 19 total items
ğŸ¤– Generating standalone checklists from document (1403 chars)
[AI] Starting document analysis (provider: OpenAI GPT-4o)
[AI] Document analysis complete, parsing response...
=== AI RESPONSE DEBUG ===
Result keys: [ 'checklists' ]
Checklists count: 3
Checklist: "Phase 0: Prerequisites"
  Section: "Backup Validation" - 3 items
  Section: "NTDS.DIT Extraction" - 1 items
  Section: "Gate 1 Approval" - 3 items
  âœ… Valid: 7 total items
Checklist: "Phase 1: Discovery"
  Section: "Infrastructure Assessment" - 1 items
  Section: "Domain Analysis and Mapping" - 1 items
  Section: "Migration Planning" - 1 items
  âœ… Valid: 3 total items
Checklist: "Phase 2: Execution"
  Section: "AWS DC Deployment" - 1 items
  Section: "Replication Setup" - 1 items
  Section: "Functional Level Upgrade" - 1 items
  âœ… Valid: 3 total items
âœ… Generated 3 valid checklists with 13 total items
âœ“ Generated 5 checklists with 75 items

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   MULTI-DOCUMENT IMPORT COMPLETE                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… Import ID: 7
âœ… Duration: 36756ms
âœ… Total AI Cost: $0.0111


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  TEST RESULTS                                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Overall Success: âœ… PASS

Documents Processed: 3
  Expected: 3
  Status: âœ…

Workstreams Created: 5
  Expected: 3 (Phase 0, 1, 2)
  Status: âœ…

Issues Created: 5
  Expected: 3+
  Status: âœ…

Timeline Extracted:
  Phases: 3 (expected: 3)
  Milestones: 3 (expected: 3)
  Status: âœ…

Dependencies Created: 0
  Expected: 1+ (Phase 1 â†’ Phase 2)
  Status: âš ï¸ 

Resource Assignments: 0
  Expected: 2+ (Sultan, Srihari)
  Status: âš ï¸ 

Checklists: 5
  Items: 75
  Status: âœ…

AI Cost: $0.0111
  Expected: < $0.50
  Status: âœ…

Errors: 0
  Expected: 0
  Status: âœ…

Warnings: 0

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  âœ… ALL TESTS PASSED!                                â•‘
â•‘  Multi-document workflow is working correctly!       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Cleaning up test data...
âœ“ Cleanup complete

ğŸ‰ Workflow test completed!
~/workspace$ 