~/workspace$ node tests/test-multi-document-workflow.js
âš ï¸  resource-parser service not available - resource assignment will be skipped
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  MULTI-DOCUMENT WORKFLOW - INTEGRATION TEST          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Setup: Creating test project...
âœ“ Created project 19

Running multi-document analyzer...

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   MULTI-DOCUMENT PROJECT IMPORT STARTING           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ Project ID: 19
ğŸ“„ Documents: 3
ğŸ“… Start Date: 2025-01-06

Step 1/7: Combining document text...
âœ“ Combined 1403 characters

Step 2/7: Detecting workstreams...
ğŸ” Analyzing document for workstreams...
ğŸ“„ Raw AI response length: 2089
ğŸ”¢ Tokens used: 1359
âœ… Identified 3 workstreams
âœ“ Found 3 workstreams
  1. Prerequisite Validation and Approval (unknown complexity)
  2. Infrastructure Assessment and Migration Planning (unknown complexity)
  3. AWS Deployment and Replication Setup (unknown complexity)

Step 3/7: Creating issues from workstreams...
  âœ“ Created issue #118: Prerequisite Validation and Approval
  âœ“ Created issue #119: Infrastructure Assessment and Migration Planning
  âœ“ Created issue #120: AWS Deployment and Replication Setup
âœ“ Created 3 issues

Step 4/7: Extracting timeline...
âœ“ Extracted 3 phases, 3 milestones

Step 5/7: Creating dependencies...
âš ï¸  Dependency mapping failed: this.dependencyMapper.mapDependencies is not a function

Step 6/7: Parsing resource assignments...
âš ï¸  Resource parser not available - skipping

Step 7/7: Generating checklists...
  Processing 3 of 3 workstreams
ğŸ¤– Generating standalone checklists from document (1403 chars)
[AI] Starting document analysis (provider: OpenAI GPT-4o)
[AI] Document analysis complete, parsing response...
=== AI RESPONSE DEBUG ===
Result keys: [ 'checklists' ]
Checklists count: 3
Checklist: "Phase 0: Prerequisites"
  Section: "Backup Validation and Verification" - 3 items
  Section: "NTDS.DIT Extraction" - 1 items
  Section: "Gate 1 Approval" - 3 items
  âœ… Valid: 7 total items
Checklist: "Phase 1: Discovery"
  Section: "Infrastructure Assessment" - 1 items
  Section: "Domain Analysis and Mapping" - 1 items
  Section: "Migration Planning" - 1 items
  âœ… Valid: 3 total items
Checklist: "Phase 2: Execution"
  Section: "AWS DC Deployment" - 1 items
  Section: "Replication Setup" - 1 items
  Section: "Functional Level Upgrade" - 1 items
  âœ… Valid: 3 total items
âœ… Generated 3 valid checklists with 13 total items
ğŸ¤– Generating standalone checklists from document (1403 chars)
[AI] Starting document analysis (provider: OpenAI GPT-4o)
[AI] Document analysis complete, parsing response...
=== AI RESPONSE DEBUG ===
Result keys: [ 'checklists' ]
Checklists count: 4
Checklist: "Prerequisites Phase"
  Section: "Backup Verification" - 3 items
  Section: "Initial Setup" - 3 items
  âœ… Valid: 6 total items
Checklist: "Discovery Phase"
  Section: "Infrastructure Assessment" - 3 items
  âœ… Valid: 3 total items
Checklist: "Execution Phase"
  Section: "Deployment and Setup" - 3 items
  âœ… Valid: 3 total items
Checklist: "Resource Allocation"
  Section: "Effort Management" - 4 items
  âœ… Valid: 4 total items
âœ… Generated 4 valid checklists with 16 total items
ğŸ¤– Generating standalone checklists from document (1403 chars)
[AI] Starting document analysis (provider: OpenAI GPT-4o)
[AI] Document analysis complete, parsing response...
=== AI RESPONSE DEBUG ===
Result keys: [ 'checklists' ]
Checklists count: 4
Checklist: "Phase 0: Prerequisites"
  Section: "Backup and Verification" - 3 items
  Section: "NTDS.DIT Extraction" - 1 items
  Section: "Gate 1 Approval" - 3 items
  âœ… Valid: 7 total items
Checklist: "Phase 1: Discovery"
  Section: "Infrastructure Assessment" - 1 items
  Section: "Domain Analysis" - 2 items
  Section: "Migration Planning" - 1 items
  âœ… Valid: 4 total items
Checklist: "Phase 2: Execution"
  Section: "AWS DC Deployment" - 1 items
  Section: "Replication Setup" - 1 items
  Section: "Functional Level Upgrade" - 1 items
  âœ… Valid: 3 total items
Checklist: "Milestones and Dependencies"
  Section: "Milestones" - 3 items
  Section: "Dependencies" - 1 items
  âœ… Valid: 4 total items
âœ… Generated 4 valid checklists with 18 total items
âœ“ Generated 3 checklists with 47 items

âŒ Multi-document import failed: invalid input syntax for type numeric: "0[object Object]"

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  TEST RESULTS                                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Overall Success: âŒ FAIL

Documents Processed: 3
  Expected: 3
  Status: âœ…

Workstreams Created: 3
  Expected: 3 (Phase 0, 1, 2)
  Status: âœ…

Issues Created: 3
  Expected: 3+
  Status: âœ…

Timeline Extracted:
  Phases: 3 (expected: 3)
  Milestones: 3 (expected: 3)
  Status: âœ…

Dependencies Created: 0
  Expected: 1+ (Phase 1 â†’ Phase 2)
  Status: âš ï¸ 

Resource Assignments: 0
  Expected: 2+ (Sultan, Srihari)
  Status: âš ï¸ 

Checklists: 3
  Items: 47
  Status: âœ…

AI Cost: $0.0000
  Expected: < $0.50
  Status: âœ…

Errors: 1
  Expected: 0
  Status: âŒ
    âŒ invalid input syntax for type numeric: "0[object Object]"

Warnings: 2
    âš ï¸  Dependency mapping failed: this.dependencyMapper.mapDependencies is not a function
    âš ï¸  Resource parser service not available

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  âš ï¸  SOME TESTS FAILED                               â•‘
â•‘  Review the results above                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Cleaning up test data...
âœ“ Cleanup complete

ğŸ‰ Workflow test completed!
~/workspace$ gh issue list --state closed

Showing 30 of 43 issues in avrvenkatesa/multi-project-tracker that match your search

ID   TITLE                           LABELS                         UPDATED           
#94  Story 7: Resource Assignmen...  enhancement, phase-1, stor...  about 18 hours ago
#93  Story 6: Dependency Extract...  enhancement, phase-1, stor...  about 1 day ago
#92  Story 5: Timeline Extractio...  enhancement, phase-1, stor...  about 1 day ago
#90  Story 3: AI Document Classi...  enhancement, phase-1, stor...  about 6 days ago
#88  Story 1: Project Complexity...  enhancement, phase-1, stor...  about 6 days ago
#56  Phase 2: AI Effort Estimati...  enhancement, phase-2, ai-e...  about 13 days ago
#55  Phase 1: AI Effort Estimati...  enhancement, phase-1, ai-f...  about 14 days ago
#54  Add tabular/table view for ...  enhancement, view-enhancem...  about 14 days ago
#53  Add checklist completion va...  enhancement, checklists, q...  about 17 days ago
#51  Phase 4 Mode 2: Multi-Check...                                 about 17 days ago
#50  Phase 4: Advanced Document-...  time-tracking                  about 13 days ago
#49  [Feature] Checklist System ...  enhancement, phase-3, prio...  about 20 days ago
#48  [Feature] Checklist System ...  enhancement, priority-p1, ...  about 22 days ago
#47  [Feature] Checklist System ...  enhancement, phase-2, prio...  about 24 days ago
#45  [Feature] Checklist System ...  enhancement, phase-1, prio...  about 25 days ago
#44  [Feature] Risk Register - P...  enhancement, priority-high...  about 27 days ago
#43  [Enhancement] Add Microsoft...  enhancement, priority-high...  about 28 days ago
#42  [Enhancement] Add copy link...  enhancement, priority-medium   about 29 days ago
#41  [Enhancement] Add tagging s...  enhancement, priority-high     about 29 days ago
#40  [Enhancement] Display creat...  enhancement, priority-high     about 1 month ago
#39  [Enhancement] Phase 3: Mult...  enhancement, priority-medium   about 1 month ago
#38  [Enhancement] Phase 2: Add ...  enhancement, priority-medium   about 1 month ago
#37  [Enhancement] Phase 1: Auto...  enhancement, priority-high     about 1 month ago
#36  [Bug] Issue and Action Item...  bug, priority-high             about 1 month ago
#35  [Enhancement] Add attachmen...  enhancement, priority-medium   about 1 month ago
#34  [Bug] AI-created items don'...  bug, priority-high             about 1 month ago
#33  [Feature] File Attachments ...  enhancement, priority-high     about 1 month ago
#32  [Bug] Failed to update acti...  bug, priority-critical         about 1 month ago
#30  [Enhancement] Add Edit and ...  enhancement, priority-high     about 1 month ago
#29  Feature: Project Edit and A...  enhancement                    about 1 month ago
~/workspace$ node tests/test-multi-document-workflow.js
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  MULTI-DOCUMENT WORKFLOW - INTEGRATION TEST          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Setup: Creating test project...
âœ“ Created project 20

Running multi-document analyzer...

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   MULTI-DOCUMENT PROJECT IMPORT STARTING           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ Project ID: 20
ğŸ“„ Documents: 3
ğŸ“… Start Date: 2025-01-06

Step 1/7: Combining document text...
âœ“ Combined 1403 characters

Step 2/7: Detecting workstreams...
ğŸ” Analyzing document for workstreams...
ğŸ“„ Raw AI response length: 2083
ğŸ”¢ Tokens used: 1361
âœ… Identified 3 workstreams
âœ“ Found 3 workstreams
  1. Prerequisites and Backup Validation (unknown complexity)
  2. Infrastructure Assessment and Domain Analysis (unknown complexity)
  3. AWS Deployment and Replication Setup (unknown complexity)

Step 3/7: Creating issues from workstreams...
  âœ“ Created issue #121: Prerequisites and Backup Validation
  âœ“ Created issue #122: Infrastructure Assessment and Domain Analysis
  âœ“ Created issue #123: AWS Deployment and Replication Setup
âœ“ Created 3 issues

Step 4/7: Extracting timeline...
âœ“ Extracted 3 phases, 3 milestones

Step 5/7: Creating dependencies...
ğŸ”— Creating dependencies for 3 workstreams in project 20
  â†’ Found 3 issues in project
  âœ“ Mapped "Prerequisites and Backup Validation" â†’ Issue #121 "Prerequisites and Backup Validation"
  âœ“ Mapped "Infrastructure Assessment and Domain Analysis" â†’ Issue #122 "Infrastructure Assessment and Domain Analysis"
  âœ“ Mapped "AWS Deployment and Replication Setup" â†’ Issue #123 "AWS Deployment and Replication Setup"
  â†’ 0 dependencies to create
âœ… Created 0 dependencies
âš  2 warnings
âœ“ Created 0 dependencies

Step 6/7: Parsing resource assignments...
ğŸ” RESOURCE PARSER - Starting extraction

Strategy 1: Parsing tables...
ğŸ“Š Found resource table with headers: task component, resource, role, effort
  âœ“ Parsed: Sultan (Infrastructure Lead) - 5.2 hours on Backup Validation
  âœ“ Parsed: Srihari S (Systems Engineer) - 2.3 hours on NTDS Extraction
  âœ“ Parsed: Moshik V (Cloud Architect) - 40 hours on AWS Deployment
  âœ“ Parsed: Sultan (Infrastructure Lead) - 12 hours on Replication Setup

Strategy 2: Parsing lists...

Strategy 3: Parsing paragraphs...

ğŸ“Š Total resources extracted: 4

Deduplicating resources...
âœ“ Unique resources: 4

Fetching project users...
âŒ Error fetching project users: error: column u.full_name does not exist
    at /home/runner/workspace/node_modules/@neondatabase/serverless/index.js:1086:33
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async getProjectUsers (/home/runner/workspace/services/resource-parser.js:274:20)
    at async Object.parseResources (/home/runner/workspace/services/resource-parser.js:513:13)
    at async MultiDocumentAnalyzer.analyzeMultipleDocuments (/home/runner/workspace/services/multi-document-analyzer.js:211:36)
    at async runWorkflowTest (/home/runner/workspace/tests/test-multi-document-workflow.js:100:20) {
  length: 109,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '35',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
âš ï¸  No users found in project - skipping user matching

âœ… Resource parsing complete!
   Resources: 4
   Matched: 0
   Need review: 0
âœ“ Assigned 0 resources

Step 7/7: Generating checklists...
  Processing 3 of 3 workstreams
ğŸ¤– Generating standalone checklists from document (1403 chars)
[AI] Starting document analysis (provider: OpenAI GPT-4o)
[AI] Document analysis complete, parsing response...
=== AI RESPONSE DEBUG ===
Result keys: [ 'checklists' ]
Checklists count: 4
Checklist: "Phase 0: Prerequisites"
  Section: "Backup Validation" - 3 items
  Section: "Gate 1 Approval" - 3 items
  âœ… Valid: 6 total items
Checklist: "Phase 1: Discovery"
  Section: "Infrastructure Assessment" - 1 items
  Section: "Domain Analysis" - 1 items
  Section: "Migration Planning" - 1 items
  âœ… Valid: 3 total items
Checklist: "Phase 2: Execution"
  Section: "AWS Deployment" - 1 items
  Section: "Replication Setup" - 1 items
  Section: "Functional Level Upgrade" - 1 items
  âœ… Valid: 3 total items
Checklist: "Resource Task Assignments"
  Section: "Task Assignments" - 4 items
  âœ… Valid: 4 total items
âœ… Generated 4 valid checklists with 16 total items
ğŸ¤– Generating standalone checklists from document (1403 chars)
[AI] Starting document analysis (provider: OpenAI GPT-4o)
[AI] Document analysis complete, parsing response...
=== AI RESPONSE DEBUG ===
Result keys: [ 'checklists' ]
Checklists count: 4
Checklist: "Phase 0: Prerequisites"
  Section: "Backup Validation" - 3 items
  Section: "NTDS.DIT Extraction" - 1 items
  Section: "Approval Checkpoint" - 3 items
  âœ… Valid: 7 total items
Checklist: "Phase 1: Discovery"
  Section: "Infrastructure Assessment" - 1 items
  Section: "Domain Analysis" - 2 items
  Section: "Migration Planning" - 1 items
  âœ… Valid: 4 total items
Checklist: "Phase 2: Execution"
  Section: "AWS DC Deployment" - 1 items
  Section: "Replication Setup" - 1 items
  Section: "Functional Level Upgrade" - 1 items
  âœ… Valid: 3 total items
Checklist: "Milestones and Dependencies"
  Section: "Milestones" - 3 items
  Section: "Dependencies" - 1 items
  âœ… Valid: 4 total items
âœ… Generated 4 valid checklists with 18 total items
ğŸ¤– Generating standalone checklists from document (1403 chars)
[AI] Starting document analysis (provider: OpenAI GPT-4o)
[AI] Document analysis complete, parsing response...
=== AI RESPONSE DEBUG ===
Result keys: [ 'checklists' ]
Checklists count: 4
Checklist: "Phase 0: Prerequisites"
  Section: "Backup Validation" - 3 items
  Section: "NTDS.DIT Extraction" - 1 items
  Section: "Gate 1 Approval" - 3 items
  âœ… Valid: 7 total items
Checklist: "Phase 1: Discovery"
  Section: "Infrastructure Assessment" - 1 items
  Section: "Domain Analysis and Mapping" - 2 items
  Section: "Migration Planning" - 1 items
  âœ… Valid: 4 total items
Checklist: "Phase 2: Execution"
  Section: "AWS DC Deployment" - 1 items
  Section: "Replication Setup" - 1 items
  Section: "Functional Level Upgrade" - 1 items
  âœ… Valid: 3 total items
Checklist: "Resource Allocation Tasks"
  Section: "Effort Estimates" - 4 items
  âœ… Valid: 4 total items
âœ… Generated 4 valid checklists with 18 total items
âœ“ Generated 3 checklists with 52 items

âŒ Multi-document import failed: invalid input syntax for type numeric: "0[object Object]"

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  TEST RESULTS                                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Overall Success: âŒ FAIL

Documents Processed: 3
  Expected: 3
  Status: âœ…

Workstreams Created: 3
  Expected: 3 (Phase 0, 1, 2)
  Status: âœ…

Issues Created: 3
  Expected: 3+
  Status: âœ…

Timeline Extracted:
  Phases: 3 (expected: 3)
  Milestones: 3 (expected: 3)
  Status: âœ…

Dependencies Created: 0
  Expected: 1+ (Phase 1 â†’ Phase 2)
  Status: âš ï¸ 

Resource Assignments: 0
  Expected: 2+ (Sultan, Srihari)
  Status: âš ï¸ 

Checklists: 3
  Items: 52
  Status: âœ…

AI Cost: $0.0000
  Expected: < $0.50
  Status: âœ…

Errors: 1
  Expected: 0
  Status: âŒ
    âŒ invalid input syntax for type numeric: "0[object Object]"

Warnings: 0

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  âš ï¸  SOME TESTS FAILED                               â•‘
â•‘  Review the results above                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Cleaning up test data...
âœ“ Cleanup complete

ğŸ‰ Workflow test completed!